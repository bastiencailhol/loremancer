<div class="bg-gray-300 py-6">
  <div class="container mx-auto px-4">
    <h1 class="mb-3">Fantasy Character Design Ideator</h1>

    <p>You'll never have the blank page again</p>
  </div>
</div>
<div class="container mx-auto px-4 py-5">
  <button
    type="button"
    (click)="rollAllTraits()"
    class="
      py-2
      px-4
      mb-5
      bg-indigo-600
      hover:bg-indigo-700
      text-white
      w-full
      transition
      ease-in
      duration-200
      text-center text-base
      font-semibold
      shadow-md
      rounded-lg
    "
  >
    Générer
  </button>
  <div class="grid grid-cols-2 gap-6">
    <div>
      <div class="relative mb-6">
        <h3 class="mb-4">Caractéristiques</h3>
        <div class="absolute top-0 right-2 flex">
          <app-reroll-button
            (onClick)="rollCategoryTraits(coreTraitsCategory)"
          ></app-reroll-button>
          <app-lock-button
            (onClick)="toggleCategoryLock(coreTraitsCategory)"
            [isLocked]="coreTraitsCategory.locked"
          ></app-lock-button>
        </div>
        <div *ngFor="let trait of coreTraitsCategory.traits" class="mb-3">
          <ng-container
            *ngTemplateOutlet="randomizedTrait; context: { trait: trait }"
          ></ng-container>
        </div>
      </div>
      <div class="relative mb-6">
        <h3 class="mb-4">Attributs physiques</h3>
        <div class="absolute top-0 right-2 flex">
          <app-reroll-button
            (onClick)="rollCategoryTraits(physicalTraitsCategory)"
          ></app-reroll-button>
          <app-lock-button
            (onClick)="toggleCategoryLock(physicalTraitsCategory)"
            [isLocked]="physicalTraitsCategory.locked"
          ></app-lock-button>
        </div>
        <div *ngFor="let trait of physicalTraitsCategory.traits" class="mb-3">
          <ng-container
            *ngTemplateOutlet="randomizedTrait; context: { trait: trait }"
          ></ng-container>
        </div>
      </div>
    </div>
    <div class="relative mb-6">
      <h3 class="mb-4">Équipements</h3>
      <div class="absolute top-0 right-2 flex">
        <app-reroll-button
          (onClick)="rollCategoryTraits(equipmentsCategory)"
        ></app-reroll-button>
        <app-lock-button
          (onClick)="toggleCategoryLock(equipmentsCategory)"
          [isLocked]="equipmentsCategory.locked"
        ></app-lock-button>
      </div>
      <div *ngFor="let trait of equipmentsCategory.traits" class="mb-3">
        <ng-container
          *ngTemplateOutlet="randomizedTrait; context: { trait: trait }"
        ></ng-container>
      </div>
    </div>
  </div>
</div>

<ng-template #randomizedTrait let-trait="trait">
  <h5 class="uppercase text-xs font-semibold text-gray-500">
    {{ trait.name }}
  </h5>
  <div class="relative px-4 py-2 border border-gray-200 rounded-lg">
    <p class="font-semibold" style="min-height: 24px">{{ trait.selected }}</p>
    <div
      class="absolute top-0 right-2 flex"
      style="transform: translateY(-50%)"
    >
      <app-reroll-button (onClick)="rollTrait(trait)"></app-reroll-button>
      <app-lock-button
        (onClick)="toggleTraitLock(trait)"
        [isLocked]="trait.locked"
      ></app-lock-button>
    </div>
  </div>
</ng-template>
